<div>
  <h3 class="text-base font-semibold leading-6 text-gray-900" id="modal-title">Validación de Documentos</h3>
  <div class="mt-2">
    <p class="text-sm text-gray-500">Revise los documentos adjuntos. Si están correctos, proceda a aprobar. Si falta algo, indique instrucciones.</p>
  </div>
  
  <div class="mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3">
    <!-- Documents viewers -->
    <% [ :bl_endosado_documento, :liberacion_documento, :encomienda_documento, :pago_documento ].each do |doc| %>
       <div class="border rounded p-2">
          <h4 class="font-bold text-xs uppercase mb-2"><%= doc.to_s.humanize.gsub('_', ' ').titleize %></h4>
          <% if bl_house_line.send(doc).attached? %>
             <%= link_to "Ver Documento", rails_blob_path(bl_house_line.send(doc), disposition: "preview"), target: "_blank", class: "inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" %>
          <% else %>
             <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
               No adjunto
             </span>
          <% end %>
       </div>
    <% end %>
  </div>

  <div class="mt-6 border-t border-gray-100 pt-6">
     <%= form_with model: bl_house_line, url: approve_revalidation_bl_house_line_path(bl_house_line), method: :patch, class: "contents" do |f| %>
        
        <% if bl_house_line.errors.any? %>
          <div class="rounded-md bg-red-50 p-4 mb-4">
            <div class="flex">
              <div class="flex-shrink-0">
                <svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z" clip-rule="evenodd" />
                </svg>
              </div>
              <div class="ml-3">
                <h3 class="text-sm font-medium text-red-800">Errors encountered:</h3>
                <div class="mt-2 text-sm text-red-700">
                  <ul role="list" class="list-disc space-y-1 pl-5">
                    <% bl_house_line.errors.full_messages.each do |msg| %>
                      <li><%= msg %></li>
                    <% end %>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        <% end %>

        <div class="mb-4">
           <%= label_tag :observations, "Observaciones (Si rechaza)", class: "block text-sm font-medium text-gray-700 mb-1" %>
           <%= text_area_tag :observations, nil, class: "block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm", rows: 3 %>
        </div>

        <div class="flex flex-col-reverse sm:flex-row sm:justify-end gap-3">
          <%= button_tag name: "decision", value: "reject", type: "submit", class: "inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:w-auto" do %>
            Instrucciones Pendientes
          <% end %>
          
          <%= button_tag name: "decision", value: "ok", type: "submit", class: "inline-flex w-full justify-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500 sm:w-auto" do %>
            Documentación Correcta ->
          <% end %>
        </div>
     <% end %>
  </div>
</div>
