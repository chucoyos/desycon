<div class="min-h-screen bg-gradient-to-b from-slate-50 via-white to-slate-100 py-10 flex justify-center items-stretch">
  <div class="w-full px-4 sm:px-6 lg:px-8">
    <!-- Header -->
    <div class="mb-8 overflow-hidden rounded-2xl bg-white shadow-xl shadow-slate-200/50 border border-slate-100">
      <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 p-6 bg-gradient-to-r from-blue-600 to-blue-500 text-white">
        <div>
          <p class="text-xs font-semibold uppercase tracking-[0.2em] opacity-90">Notificaciones</p>
          <div class="flex items-center gap-2">
            <span class="inline-flex h-10 w-10 items-center justify-center rounded-xl bg-white/15">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.6" d="M15 17h5l-5 5v-5zM4.868 12.683A17.925 17.925 0 0112 21c7.962 0 12-1.21 12-2.683m-12 2.683a17.925 17.925 0 01-7.132-8.317M12 21c4.411 0 8-4.03 8-9s-3.589-9-8-9-8 4.03-8 9a9.06 9.06 0 001.832 5.445L4 21l7.868-2.317z"/>
              </svg>
            </span>
            <h1 class="text-3xl font-bold leading-tight">Notificaciones</h1>
          </div>
          <p class="text-sm text-blue-100">Mantente al día con las actualizaciones importantes del sistema</p>
        </div>
      </div>
    </div>

    <!-- Filters - Material Design Inspired -->
    <div class="mb-8">
      <div class="bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden">
        <!-- Filter Header -->
        <div class="px-6 py-4 bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200">
          <div class="flex items-center gap-3">
            <div class="flex items-center justify-center w-8 h-8 bg-blue-100 rounded-lg">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-blue-600">
                <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
              </svg>
            </div>
            <h3 class="text-lg font-semibold text-gray-900">Filtros de búsqueda</h3>
          </div>
        </div>

        <!-- Filter Form -->
        <div class="p-6">
          <%= form_with url: notifications_path, method: :get, class: "space-y-6" do |f| %>
            <%= hidden_field_tag :per, @per_page %>

            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6">
              <!-- Search Filter -->
              <div class="space-y-2">
                <label for="search" class="block text-sm font-medium text-gray-700 mb-2">
                  Buscar
                </label>
                <div class="relative">
                  <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-gray-400">
                      <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
                    </svg>
                  </div>
                  <%= f.text_field :search, value: params[:search],
                    placeholder: "BlHouse",
                    class: "block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-xl bg-gray-50 focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-gray-900 placeholder-gray-500 shadow-sm" %>
                </div>
              </div>

              <!-- Read Status Filter -->
              <div class="space-y-2">
                <label for="read_status" class="block text-sm font-medium text-gray-700 mb-2">
                  Estado de lectura
                </label>
                <div class="relative">
                  <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-gray-400">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                    </svg>
                  </div>
                  <%= f.select :read_status, options_for_select([
                    ["Todos", ""],
                    ["Leídas", "read"],
                    ["No leídas", "unread"]
                  ], params[:read_status]), {},
                  class: "block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-xl bg-gray-50 focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-gray-900 shadow-sm appearance-none" %>
                  <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-gray-400">
                      <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                    </svg>
                  </div>
                </div>
              </div>

              <!-- Action Type Filter -->
              <div class="space-y-2">
                <label for="action_type" class="block text-sm font-medium text-gray-700 mb-2">
                  Tipo de acción
                </label>
                <div class="relative">
                  <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-gray-400">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z" />
                    </svg>
                  </div>
                  <%= f.select :action_type, options_for_select([
                    ["Todos los tipos", ""],
                    ["Revalidado", "revalidado"],
                    ["Solicitó revalidación", "solicitó revalidación"]
                  ], params[:action_type]), {},
                  class: "block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-xl bg-gray-50 focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-gray-900 shadow-sm appearance-none" %>
                  <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-gray-400">
                      <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                    </svg>
                  </div>
                </div>
              </div>

              <!-- Date Range Filter -->
              <div class="space-y-2">
                <label class="block text-sm font-medium text-gray-700 mb-2">
                  Rango de fechas
                </label>
                <div class="grid grid-cols-2 gap-2">
                  <%= f.text_field :start_date, value: params[:start_date],
                    placeholder: "Desde",
                    class: "block w-full px-3 py-3 border border-gray-300 rounded-xl bg-gray-50 focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-gray-900 placeholder-gray-500 shadow-sm",
                    type: "date" %>
                  <%= f.text_field :end_date, value: params[:end_date],
                    placeholder: "Hasta",
                    class: "block w-full px-3 py-3 border border-gray-300 rounded-xl bg-gray-50 focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-gray-900 placeholder-gray-500 shadow-sm",
                    type: "date" %>
                </div>
              </div>

              <!-- Action Buttons -->
              <div class="space-y-2">
                <label class="block text-sm font-medium text-gray-700 mb-2 opacity-0">
                  Acciones
                </label>
                <div class="flex flex-col sm:flex-row gap-3">
                  <%= f.submit "Buscar", class: "flex-1 inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-sm font-semibold rounded-xl shadow-lg hover:shadow-xl hover:from-blue-600 hover:to-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-500/25 transform active:scale-95 transition-all duration-150 cursor-pointer" %>
                  <%= link_to notifications_path, class: "flex-1 inline-flex items-center justify-center px-6 py-3 bg-white text-gray-700 text-sm font-semibold rounded-xl border-2 border-gray-300 hover:border-gray-400 hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-gray-500/25 active:bg-gray-100 transform active:scale-95 transition-all duration-150 shadow-sm hover:shadow-md" do %>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-2">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" />
                    </svg>
                    Limpiar
                  <% end %>
                </div>
              </div>
            </div>

            <!-- Active Filters Display -->
            <% if params[:search].present? || params[:read_status].present? || params[:action_type].present? || params[:start_date].present? || params[:end_date].present? %>
              <div class="pt-4 border-t border-gray-200 mt-4">
                <div class="flex items-center justify-between flex-wrap gap-4">
                  <div class="flex items-center gap-2 text-sm text-gray-600 flex-wrap">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-blue-500">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 01-.659 1.591l-5.432 5.432a2.25 2.25 0 00-.659 1.591v2.927a2.25 2.25 0 01-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 00-.659-1.591L3.659 7.409A2.25 2.25 0 013 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0112 3z" />
                    </svg>
                    <span class="font-medium">Filtros activos:</span>
                    <% if params[:search].present? %>
                      <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200">
                        Búsqueda: <%= params[:search] %>
                      </span>
                    <% end %>
                    <% if params[:read_status].present? %>
                      <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 border border-purple-200">
                        Estado: <%= params[:read_status] == 'read' ? 'Leídas' : 'No leídas' %>
                      </span>
                    <% end %>
                    <% if params[:action_type].present? %>
                      <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800 border border-indigo-200">
                        Acción: <%= params[:action_type].titleize %>
                      </span>
                    <% end %>
                    <% if params[:start_date].present? || params[:end_date].present? %>
                      <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800 border border-amber-200">
                        Fecha: <%= [params[:start_date], params[:end_date]].reject(&:blank?).join(' - ') %>
                      </span>
                    <% end %>
                  </div>
                  <%= link_to notifications_path(per: @per_page),
                    class: "text-sm text-blue-600 hover:text-blue-800 font-medium inline-flex items-center gap-1 transition-colors bg-blue-50 px-3 py-1.5 rounded-lg hover:bg-blue-100" do %>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-3.5 h-3.5">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                    Borrar todos
                  <% end %>
                </div>
              </div>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>

    <!-- Notifications List -->
    <div class="mb-8 overflow-hidden rounded-2xl bg-white shadow-xl shadow-slate-200/50 border border-slate-100">
      <% if @notifications.any? %>
        <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 p-5" id="notifications_list">
          <%= render partial: "notifications/notification", collection: @notifications %>
        </div>
      <% else %>
        <div class="p-10 text-center text-slate-600">
          <div class="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4">
            <svg class="w-8 h-8 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2M4 13h2m8-5v2m0 0v2m0-2h2m-2 0h-2"/>
            </svg>
          </div>
          <h3 class="text-lg font-medium text-slate-900 mb-2">No hay notificaciones</h3>
          <p class="text-slate-500 text-sm">Las nuevas notificaciones aparecerán aquí automáticamente</p>
        </div>
      <% end %>
    </div>

    <!-- Pagination -->
    <div class="mt-6">
      <%= render 'shared/tailwind_pagination', paginated: @notifications %>
    </div>
  </div>
</div>

<turbo-frame id="approval_modal"></turbo-frame>
<turbo-frame id="revalidation_modal"></turbo-frame>
