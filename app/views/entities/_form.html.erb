<% show_actions = local_assigns.fetch(:show_actions, true) %>

<%= form_with(model: entity, class: "space-y-6", id: "entity_form") do |form| %>
  <%= render "shared/error_messages", object: entity %>

  <!-- Basic Information -->
  <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
    <div class="px-4 sm:px-6 py-4 bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200">
      <h3 class="text-base sm:text-lg font-semibold text-gray-900">Información Básica</h3>
    </div>
    <div class="px-4 sm:px-6 py-4 space-y-4">
      <!-- Name -->
      <div>
        <%= form.label :name, "Nombre", class: "block text-sm font-semibold text-gray-700 mb-2" %>
        <div class="relative">
          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
            </svg>
          </div>
          <%= form.text_field :name, 
              class: "block w-full pl-10 pr-3 py-3 border-2 #{entity.errors[:name].any? ? 'border-red-300 focus:border-red-500 focus:ring-red-500' : 'border-gray-200 focus:border-teal-500 focus:ring-teal-500'} rounded-lg focus:ring-2 transition-all duration-200 text-gray-900",
              placeholder: "Nombre de la entidad" %>
        </div>
        <% if entity.errors[:name].any? %>
          <p class="mt-2 text-sm text-red-600 flex items-center gap-1">
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
            </svg>
            <%= entity.errors[:name].first %>
          </p>
        <% end %>
      </div>

      <!-- Roles -->
      <div>
        <label class="block text-sm font-semibold text-gray-700 mb-3">Roles</label>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
          <% unless current_user.customs_broker? %>
            <label class="relative flex items-start p-4 rounded-lg border-2 cursor-pointer hover:bg-purple-50 transition-colors duration-150 <%= entity.is_consolidator ? 'border-purple-500 bg-purple-50' : 'border-gray-200' %>">
              <%= form.check_box :is_consolidator, class: "h-5 w-5 text-purple-600 border-gray-300 rounded focus:ring-purple-500" %>
              <div class="ml-3">
                <span class="block text-sm font-medium text-gray-900">Consolidador</span>
                <span class="block text-xs text-gray-500">Consolida carga de múltiples clientes</span>
              </div>
            </label>

            <label class="relative flex items-start p-4 rounded-lg border-2 cursor-pointer hover:bg-blue-50 transition-colors duration-150 <%= entity.is_customs_agent ? 'border-blue-500 bg-blue-50' : 'border-gray-200' %>">
              <%= form.check_box :is_customs_agent, class: "h-5 w-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500" %>
              <div class="ml-3">
                <span class="block text-sm font-medium text-gray-900">Agente Aduanal</span>
                <span class="block text-xs text-gray-500">Gestiona trámites aduanales</span>
              </div>
            </label>

            <label class="relative flex items-start p-4 rounded-lg border-2 cursor-pointer hover:bg-green-50 transition-colors duration-150 <%= entity.is_forwarder ? 'border-green-500 bg-green-50' : 'border-gray-200' %>">
              <%= form.check_box :is_forwarder, class: "h-5 w-5 text-green-600 border-gray-300 rounded focus:ring-green-500" %>
              <div class="ml-3">
                <span class="block text-sm font-medium text-gray-900">Forwarder</span>
                <span class="block text-xs text-gray-500">Coordina transporte internacional</span>
              </div>
            </label>
          <% end %>

          <label class="relative flex items-start p-4 rounded-lg border-2 cursor-pointer hover:bg-amber-50 transition-colors duration-150 <%= (entity.is_client || current_user.customs_broker?) ? 'border-amber-500 bg-amber-50' : 'border-gray-200' %>">
            <%= form.check_box :is_client, 
                class: "h-5 w-5 text-amber-600 border-gray-300 rounded focus:ring-amber-500",
                disabled: current_user.customs_broker?,
                checked: (entity.is_client || current_user.customs_broker?) %>
            <div class="ml-3">
              <span class="block text-sm font-medium text-gray-900">Cliente</span>
              <span class="block text-xs text-gray-500">Cliente a facturar</span>
            </div>
          </label>
        </div>
      </div>
    </div>
  </div>

  <!-- Customs Agent Assignment (Only for admins/executives) -->
  <% unless current_user.customs_broker? %>
  <div id="customs-agent-assignment-section" class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden" style="<%= entity.is_client ? '' : 'display: none;' %>">
    <div class="px-4 sm:px-6 py-4 bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200">
      <h3 class="text-base sm:text-lg font-semibold text-gray-900">Asignación de Agente Aduanal</h3>
    </div>
    <div class="px-4 sm:px-6 py-4">
      <div>
        <%= form.label :customs_agent_id, "Agente Aduanal", class: "block text-sm font-semibold text-gray-700 mb-2" %>
        <%= form.collection_select :customs_agent_id, 
            Entity.where(is_customs_agent: true).order(:name), 
            :id, 
            :name, 
            { include_blank: "Sin asignar" }, 
            class: "block w-full px-3 py-3 border-2 border-gray-200 focus:border-teal-500 focus:ring-teal-500 rounded-lg focus:ring-2 transition-all duration-200 text-gray-900" %>
        <p class="mt-1 text-sm text-gray-500">Asigna el cliente a un agente aduanal (opcional)</p>
      </div>
    </div>
  </div>
  <% end %>

  <!-- Fiscal Profile -->
  <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
    <div class="px-4 sm:px-6 py-4 bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200">
      <div class="flex items-center justify-between">
        <h3 class="text-base sm:text-lg font-semibold text-gray-900">Perfil Fiscal</h3>
        <button type="button"
                id="toggle-fiscal-profile-btn"
                class="inline-flex items-center px-3 py-1.5 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-colors duration-150">
          <svg class="w-4 h-4 mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"/>
          </svg>
          Ocultar
        </button>
      </div>
    </div>

    <!-- Fiscal Profile Form (Initially Visible) -->
    <div id="fiscal-profile-section" class="px-4 sm:px-6 py-4">
      <% if entity.fiscal_profile %>
        <%= form.fields_for :fiscal_profile do |fp| %>
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div>
              <%= fp.label :rfc, "RFC", class: "block text-sm font-semibold text-gray-700 mb-2" %>
              <%= fp.text_field :rfc, 
                  class: "block w-full px-3 py-3 border-2 #{entity.fiscal_profile&.errors[:rfc].any? ? 'border-red-300 focus:border-red-500 focus:ring-red-500' : 'border-gray-200 focus:border-teal-500 focus:ring-teal-500'} rounded-lg focus:ring-2 transition-all duration-200 text-gray-900",
                  placeholder: "XAXX010101000",
                  maxlength: 13 %>
              <% if entity.fiscal_profile&.errors[:rfc].any? %>
                <p class="mt-2 text-sm text-red-600 flex items-center gap-1">
                  <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                  </svg>
                  <%= entity.fiscal_profile.errors[:rfc].first %>
                </p>
              <% end %>
            </div>

            <div>
              <%= fp.label :razon_social, "Razón Social", class: "block text-sm font-semibold text-gray-700 mb-2" %>
              <%= fp.text_field :razon_social, 
                  class: "block w-full px-3 py-3 border-2 border-gray-200 focus:border-teal-500 focus:ring-teal-500 rounded-lg focus:ring-2 transition-all duration-200 text-gray-900",
                  placeholder: "Razón social completa" %>
            </div>

            <div>
              <%= fp.label :regimen, "Régimen Fiscal", class: "block text-sm font-semibold text-gray-700 mb-2" %>
              <%= fp.select :regimen,
                  FiscalProfile::REGIMENES.map { |k, v| ["#{k} - #{v}", k] },
                  { include_blank: "Seleccionar régimen" },
                  class: "block w-full px-3 py-3 border-2 border-gray-200 focus:border-teal-500 focus:ring-teal-500 rounded-lg focus:ring-2 transition-all duration-200 text-gray-900" %>
            </div>

            <div>
              <%= fp.label :uso_cfdi, "Uso CFDI", class: "block text-sm font-semibold text-gray-700 mb-2" %>
              <%= fp.select :uso_cfdi,
                  FiscalProfile::USOS_CFDI.map { |k, v| ["#{k} - #{v}", k] },
                  { include_blank: "Seleccionar uso CFDI" },
                  class: "block w-full px-3 py-3 border-2 border-gray-200 focus:border-teal-500 focus:ring-teal-500 rounded-lg focus:ring-2 transition-all duration-200 text-gray-900" %>
            </div>

            <div>
              <%= fp.label :forma_pago, "Forma de Pago", class: "block text-sm font-semibold text-gray-700 mb-2" %>
              <%= fp.select :forma_pago,
                  FiscalProfile::FORMAS_PAGO.map { |k, v| ["#{k} - #{v}", k] },
                  { include_blank: "Seleccionar forma de pago" },
                  class: "block w-full px-3 py-3 border-2 border-gray-200 focus:border-teal-500 focus:ring-teal-500 rounded-lg focus:ring-2 transition-all duration-200 text-gray-900" %>
            </div>

            <div>
              <%= fp.label :metodo_pago, "Método de Pago", class: "block text-sm font-semibold text-gray-700 mb-2" %>
              <%= fp.select :metodo_pago,
                  FiscalProfile::METODOS_PAGO.map { |k, v| ["#{k} - #{v}", k] },
                  { include_blank: "Seleccionar método de pago" },
                  class: "block w-full px-3 py-3 border-2 border-gray-200 focus:border-teal-500 focus:ring-teal-500 rounded-lg focus:ring-2 transition-all duration-200 text-gray-900" %>
            </div>
          </div>
        <% end %>
      <% else %>
        <div class="text-center py-8">
          <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
          </svg>
          <h3 class="mt-2 text-sm font-medium text-gray-900">No hay perfil fiscal</h3>
          <p class="mt-1 text-sm text-gray-500">El perfil fiscal se creará automáticamente cuando guardes la entidad.</p>
        </div>
      <% end %>
    </div>
  </div>

  <% unless entity.persisted? %>
    <!-- Customs Agent Patents for New Entities (Always rendered but hidden by default) -->
    <div id="patents-section" class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden" style="display: none;">
      <div class="px-4 sm:px-6 py-4 bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200">
        <h3 class="text-base sm:text-lg font-semibold text-gray-900">Patentes Aduanales</h3>
      </div>
      <div class="px-4 sm:px-6 py-4">
        <%= form.fields_for :customs_agent_patents do |patent_form| %>
          <div class="space-y-4">
            <div>
              <%= patent_form.label :patent_number, "Número de Patente", class: "block text-sm font-semibold text-gray-700 mb-2" %>
              <%= patent_form.text_field :patent_number,
                  class: "block w-full px-3 py-3 border-2 border-gray-200 focus:border-teal-500 focus:ring-teal-500 rounded-lg focus:ring-2 transition-all duration-200 text-gray-900",
                  placeholder: "Número de patente aduanal" %>
            </div>
          </div>
        <% end %>
        <div class="text-sm text-gray-500 mt-2">
          Las patentes aduanales se pueden agregar después de crear la entidad.
        </div>
      </div>
    </div>
  <% end %>

  <!-- Addresses -->
  <% unless entity.persisted? %>
  <!-- Address fields for new entities (nested attributes) -->
  <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
    <div class="px-4 sm:px-6 py-4 bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200">
      <h3 class="text-base sm:text-lg font-semibold text-gray-900">Dirección Principal</h3>
    </div>
    <div class="px-4 sm:px-6 py-4">
      <%= form.fields_for :addresses do |address_form| %>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
          <div>
            <%= address_form.label :tipo, "Tipo", class: "block text-sm font-semibold text-gray-700 mb-2" %>
            <%= address_form.select :tipo,
                Address::TIPOS.map { |k, v| [v, k] },
                { include_blank: "Seleccionar tipo" },
                class: "block w-full px-3 py-3 border-2 border-gray-200 focus:border-teal-500 focus:ring-teal-500 rounded-lg focus:ring-2 transition-all duration-200 text-gray-900" %>
          </div>

          <div>
            <%= address_form.label :calle, "Calle", class: "block text-sm font-semibold text-gray-700 mb-2" %>
            <%= address_form.text_field :calle,
                class: "block w-full px-3 py-3 border-2 border-gray-200 focus:border-teal-500 focus:ring-teal-500 rounded-lg focus:ring-2 transition-all duration-200 text-gray-900",
                placeholder: "Nombre de la calle" %>
          </div>

          <div>
            <%= address_form.label :numero_exterior, "Número Exterior", class: "block text-sm font-semibold text-gray-700 mb-2" %>
            <%= address_form.text_field :numero_exterior,
                class: "block w-full px-3 py-3 border-2 border-gray-200 focus:border-teal-500 focus:ring-teal-500 rounded-lg focus:ring-2 transition-all duration-200 text-gray-900",
                placeholder: "123" %>
          </div>

          <div>
            <%= address_form.label :numero_interior, "Número Interior", class: "block text-sm font-semibold text-gray-700 mb-2" %>
            <%= address_form.text_field :numero_interior,
                class: "block w-full px-3 py-3 border-2 border-gray-200 focus:border-teal-500 focus:ring-teal-500 rounded-lg focus:ring-2 transition-all duration-200 text-gray-900",
                placeholder: "A, B, etc. (opcional)" %>
          </div>

          <div>
            <%= address_form.label :colonia, "Colonia", class: "block text-sm font-semibold text-gray-700 mb-2" %>
            <%= address_form.text_field :colonia,
                class: "block w-full px-3 py-3 border-2 border-gray-200 focus:border-teal-500 focus:ring-teal-500 rounded-lg focus:ring-2 transition-all duration-200 text-gray-900",
                placeholder: "Nombre de la colonia" %>
          </div>

          <div>
            <%= address_form.label :codigo_postal, "Código Postal", class: "block text-sm font-semibold text-gray-700 mb-2" %>
            <%= address_form.text_field :codigo_postal,
                class: "block w-full px-3 py-3 border-2 border-gray-200 focus:border-teal-500 focus:ring-teal-500 rounded-lg focus:ring-2 transition-all duration-200 text-gray-900",
                placeholder: "12345" %>
          </div>

          <div>
            <%= address_form.label :municipio, "Municipio", class: "block text-sm font-semibold text-gray-700 mb-2" %>
            <%= address_form.text_field :municipio,
                class: "block w-full px-3 py-3 border-2 border-gray-200 focus:border-teal-500 focus:ring-teal-500 rounded-lg focus:ring-2 transition-all duration-200 text-gray-900",
                placeholder: "Nombre del municipio" %>
          </div>

          <div>
            <%= address_form.label :estado, "Estado", class: "block text-sm font-semibold text-gray-700 mb-2" %>
            <%= address_form.text_field :estado,
                class: "block w-full px-3 py-3 border-2 border-gray-200 focus:border-teal-500 focus:ring-teal-500 rounded-lg focus:ring-2 transition-all duration-200 text-gray-900",
                placeholder: "Nombre del estado" %>
          </div>

          <div>
            <%= address_form.label :pais, "País", class: "block text-sm font-semibold text-gray-700 mb-2" %>
            <%= address_form.select :pais,
                Address.paises_con_banderas.map { |display, code| [display, code] },
              { include_blank: "Seleccionar país" },
                class: "block w-full px-3 py-3 border-2 border-gray-200 focus:border-teal-500 focus:ring-teal-500 rounded-lg focus:ring-2 transition-all duration-200 text-gray-900" %>
          </div>

          <div class="sm:col-span-2 lg:col-span-3">
            <%= address_form.label :email, "Email", class: "block text-sm font-semibold text-gray-700 mb-2" %>
            <%= address_form.email_field :email,
                class: "block w-full px-3 py-3 border-2 border-gray-200 focus:border-teal-500 focus:ring-teal-500 rounded-lg focus:ring-2 transition-all duration-200 text-gray-900",
                placeholder: "correo@ejemplo.com" %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
  <% end %>

  <script>
    function initializeFormJavaScript() {
      // Toggle fiscal profile section
      const toggleFiscalBtn = document.getElementById('toggle-fiscal-profile-btn');
      const fiscalProfileSection = document.getElementById('fiscal-profile-section');

      if (toggleFiscalBtn && fiscalProfileSection) {
        // Clone the button to remove any existing event listeners
        const newToggleFiscalBtn = toggleFiscalBtn.cloneNode(true);
        toggleFiscalBtn.parentNode.replaceChild(newToggleFiscalBtn, toggleFiscalBtn);

        newToggleFiscalBtn.addEventListener('click', function() {
          if (fiscalProfileSection.classList.contains('hidden')) {
            fiscalProfileSection.classList.remove('hidden');
            this.innerHTML = `
              <svg class="w-4 h-4 mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"/>
              </svg>
              Ocultar
            `;
            this.classList.remove('text-gray-700', 'border-gray-300', 'hover:bg-gray-50');
            this.classList.add('text-red-700', 'border-red-300', 'hover:bg-red-50');
          } else {
            fiscalProfileSection.classList.add('hidden');
            this.innerHTML = `
              <svg class="w-4 h-4 mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
              </svg>
              Mostrar
            `;
            this.classList.remove('text-red-700', 'border-red-300', 'hover:bg-red-50');
            this.classList.add('text-gray-700', 'border-gray-300', 'hover:bg-gray-50');
          }
        });
      }

      // Toggle patents section based on customs agent checkbox (new and edit)
      const customsAgentCheckbox = document.getElementById('entity_is_customs_agent');
      const patentsSection = document.getElementById('patents-section');

      if (customsAgentCheckbox && patentsSection) {
        const newCustomsAgentCheckbox = customsAgentCheckbox.cloneNode(true);
        customsAgentCheckbox.parentNode.replaceChild(newCustomsAgentCheckbox, customsAgentCheckbox);

        const togglePatentsSection = () => {
          if (newCustomsAgentCheckbox.checked) {
            patentsSection.style.display = 'block';
          } else {
            patentsSection.style.display = 'none';
          }
        };

        newCustomsAgentCheckbox.addEventListener('change', togglePatentsSection);
        togglePatentsSection();
      }

      // Toggle customs agent assignment section based on client checkbox (new and edit)
      const clientCheckbox = document.getElementById('entity_is_client');
      const customsAgentAssignmentSection = document.getElementById('customs-agent-assignment-section');

      if (clientCheckbox && customsAgentAssignmentSection) {
        const newClientCheckbox = clientCheckbox.cloneNode(true);
        clientCheckbox.parentNode.replaceChild(newClientCheckbox, clientCheckbox);

        const toggleCustomsAgentAssignmentSection = () => {
          if (newClientCheckbox.checked) {
            customsAgentAssignmentSection.style.display = 'block';
          } else {
            customsAgentAssignmentSection.style.display = 'none';
          }
        };

        newClientCheckbox.addEventListener('change', toggleCustomsAgentAssignmentSection);
        toggleCustomsAgentAssignmentSection();
      }

      // Toggle addresses form (only for persisted entities)
      <% if entity.persisted? %>
      const toggleAddressesBtn = document.getElementById('toggle-addresses-btn');
      const newAddressSection = document.getElementById('new-address-section');

      if (toggleAddressesBtn && newAddressSection) {
        // Clone the button to remove any existing event listeners
        const newToggleAddressesBtn = toggleAddressesBtn.cloneNode(true);
        toggleAddressesBtn.parentNode.replaceChild(newToggleAddressesBtn, toggleAddressesBtn);

        newToggleAddressesBtn.addEventListener('click', function() {
          if (newAddressSection.classList.contains('hidden')) {
            newAddressSection.classList.remove('hidden');
            this.innerHTML = `
              <svg class="w-4 h-4 mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
              </svg>
              Cancelar
            `;
            this.classList.remove('text-gray-700', 'border-gray-300', 'hover:bg-gray-50');
            this.classList.add('text-red-700', 'border-red-300', 'hover:bg-red-50');
          } else {
            newAddressSection.classList.add('hidden');
            this.innerHTML = `
              <svg class="w-4 h-4 mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
              </svg>
              Agregar Dirección
            `;
            this.classList.remove('text-red-700', 'border-red-300', 'hover:bg-red-50');
            this.classList.add('text-gray-700', 'border-gray-300', 'hover:bg-gray-50');
          }
        });
      }
      <% end %>
    }

    // Initialize on page load and after Turbo navigation
    document.addEventListener('DOMContentLoaded', initializeFormJavaScript);
    document.addEventListener('turbo:load', initializeFormJavaScript);
    
    // Also initialize immediately
    initializeFormJavaScript();
  </script>

  <% if show_actions %>
    <!-- Form Actions -->
    <div class="mt-8 flex flex-wrap gap-3 px-5 py-4">
      <%= form.submit entity.persisted? ? 'Actualizar Entidad' : 'Crear Entidad',
          class: "cursor-pointer inline-flex items-center justify-center gap-2 px-5 py-2.5 rounded-full bg-gradient-to-r from-teal-600 to-cyan-700 text-white text-sm font-semibold shadow-md shadow-teal-200 hover:from-teal-700 hover:to-cyan-800 transition" %>
      <%= link_to "Cancelar", entities_path,
          class: "cursor-pointer inline-flex items-center justify-center gap-2 px-5 py-2.5 rounded-full border border-slate-200 text-slate-700 text-sm font-semibold hover:bg-slate-50 transition" %>
    </div>
  <% end %>
<% end %>