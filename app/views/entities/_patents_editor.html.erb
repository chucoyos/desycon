<div id="patents_container" class="pb-24">
  <div id="patents-section" class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden" style="<%= 'display: none;' unless entity.is_customs_agent %>">
    <div class="px-4 sm:px-6 py-4 bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200">
      <div class="flex items-center justify-between">
        <h3 class="text-base sm:text-lg font-semibold text-gray-900">Patentes Aduanales</h3>
      </div>
    </div>
    <div class="px-4 sm:px-6 py-4">
      <div id="patents-list" class="space-y-2 mb-3">
        <% entity.customs_agent_patents.select(&:persisted?).each do |patent| %>
          <%= render partial: "customs_agent_patents/patent", locals: { patent: patent } %>
        <% end %>
      </div>

      <%= turbo_frame_tag "new_patent" %>

      <button type="button"
              id="add-patent-btn"
              onclick="document.getElementById('new_patent').innerHTML = document.getElementById('patent-form-template').innerHTML; this.style.display = 'none';"
              class="inline-flex items-center gap-1 px-3 py-1.5 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors duration-150">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
        </svg>
        Agregar Patente
      </button>

      <template id="patent-form-template">
        <%= render partial: 'customs_agent_patents/form', locals: { entity: entity } %>
      </template>
    </div>
  </div>
</div>
