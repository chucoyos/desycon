<% if params[:context] == "edit" %>
  <%= turbo_stream.replace "addresses_container" do %>
    <%= render partial: "entities/addresses_editor", locals: { entity: @entity } %>
  <% end %>

  <%= turbo_stream.replace "flash_messages" do %>
    <%= render partial: "shared/flash_messages", locals: { flash: flash } %>
  <% end %>
<% else %>
  <%= turbo_stream.replace "addresses_container" do %>
    <%= render partial: "entities/addresses_section", locals: { entity: @entity } %>
  <% end %>

  <%= turbo_stream.replace "flash_messages" do %>
    <%= render partial: "shared/flash_messages", locals: { flash: flash } %>
  <% end %>

  <%= turbo_stream.remove "new-address-modal" %>
<% end %>
