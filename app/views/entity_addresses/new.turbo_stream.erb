<%# Handle validation errors for new address creation %>
<%= turbo_stream.replace "flash_messages" do %>
  <%= render partial: "shared/flash_messages", locals: { flash: flash } %>
<% end %>

<%= turbo_stream.replace "new_address_form" do %>
  <form action="<%= entity_addresses_path(@entity) %>" accept-charset="UTF-8" method="post" class="space-y-4" id="new_address_form">
    <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
    <div>
      <label for="address_tipo" class="block text-sm font-semibold text-gray-700 mb-2">Tipo</label>
      <select name="address[tipo]" id="address_tipo" class="block w-full px-3 py-3 border-2 border-gray-200 focus:border-teal-500 focus:ring-teal-500 rounded-lg focus:ring-2 transition-all duration-200 text-gray-900">
        <option value="">Seleccionar tipo</option>
        <% Address::TIPOS.each do |k, v| %>
          <option value="<%= k %>"><%= v %></option>
        <% end %>
      </select>
      <% if @address.errors[:tipo].any? %>
        <p class="mt-1 text-sm text-red-600"><%= @address.errors[:tipo].join(", ") %></p>
      <% end %>
    </div>
    <div>
      <label for="address_calle" class="block text-sm font-semibold text-gray-700 mb-2">Calle</label>
      <input type="text" name="address[calle]" id="address_calle" class="block w-full px-3 py-3 border-2 border-gray-200 focus:border-teal-500 focus:ring-teal-500 rounded-lg focus:ring-2 transition-all duration-200 text-gray-900" placeholder="Nombre de la calle">
      <% if @address.errors[:calle].any? %>
        <p class="mt-1 text-sm text-red-600"><%= @address.errors[:calle].join(", ") %></p>
      <% end %>
    </div>
    <div>
      <label for="address_numero_exterior" class="block text-sm font-semibold text-gray-700 mb-2">Número Exterior</label>
      <input type="text" name="address[numero_exterior]" id="address_numero_exterior" class="block w-full px-3 py-3 border-2 border-gray-200 focus:border-teal-500 focus:ring-teal-500 rounded-lg focus:ring-2 transition-all duration-200 text-gray-900" placeholder="123">
      <% if @address.errors[:numero_exterior].any? %>
        <p class="mt-1 text-sm text-red-600"><%= @address.errors[:numero_exterior].join(", ") %></p>
      <% end %>
    </div>
    <div>
      <label for="address_numero_interior" class="block text-sm font-semibold text-gray-700 mb-2">Número Interior</label>
      <input type="text" name="address[numero_interior]" id="address_numero_interior" class="block w-full px-3 py-3 border-2 border-gray-200 focus:border-teal-500 focus:ring-teal-500 rounded-lg focus:ring-2 transition-all duration-200 text-gray-900" placeholder="A, B, etc. (opcional)">
      <% if @address.errors[:numero_interior].any? %>
        <p class="mt-1 text-sm text-red-600"><%= @address.errors[:numero_interior].join(", ") %></p>
      <% end %>
    </div>
    <div>
      <label for="address_colonia" class="block text-sm font-semibold text-gray-700 mb-2">Colonia</label>
      <input type="text" name="address[colonia]" id="address_colonia" class="block w-full px-3 py-3 border-2 border-gray-200 focus:border-teal-500 focus:ring-teal-500 rounded-lg focus:ring-2 transition-all duration-200 text-gray-900" placeholder="Nombre de la colonia">
      <% if @address.errors[:colonia].any? %>
        <p class="mt-1 text-sm text-red-600"><%= @address.errors[:colonia].join(", ") %></p>
      <% end %>
    </div>
    <div>
      <label for="address_codigo_postal" class="block text-sm font-semibold text-gray-700 mb-2">Código Postal</label>
      <input type="text" name="address[codigo_postal]" id="address_codigo_postal" class="block w-full px-3 py-3 border-2 border-gray-200 focus:border-teal-500 focus:ring-teal-500 rounded-lg focus:ring-2 transition-all duration-200 text-gray-900" placeholder="12345">
      <% if @address.errors[:codigo_postal].any? %>
        <p class="mt-1 text-sm text-red-600"><%= @address.errors[:codigo_postal].join(", ") %></p>
      <% end %>
    </div>
    <div>
      <label for="address_municipio" class="block text-sm font-semibold text-gray-700 mb-2">Municipio</label>
      <input type="text" name="address[municipio]" id="address_municipio" class="block w-full px-3 py-3 border-2 border-gray-200 focus:border-teal-500 focus:ring-teal-500 rounded-lg focus:ring-2 transition-all duration-200 text-gray-900" placeholder="Nombre del municipio">
      <% if @address.errors[:municipio].any? %>
        <p class="mt-1 text-sm text-red-600"><%= @address.errors[:municipio].join(", ") %></p>
      <% end %>
    </div>
    <div>
      <label for="address_estado" class="block text-sm font-semibold text-gray-700 mb-2">Estado</label>
      <input type="text" name="address[estado]" id="address_estado" class="block w-full px-3 py-3 border-2 border-gray-200 focus:border-teal-500 focus:ring-teal-500 rounded-lg focus:ring-2 transition-all duration-200 text-gray-900" placeholder="Nombre del estado">
      <% if @address.errors[:estado].any? %>
        <p class="mt-1 text-sm text-red-600"><%= @address.errors[:estado].join(", ") %></p>
      <% end %>
    </div>
    <div>
      <label for="address_pais" class="block text-sm font-semibold text-gray-700 mb-2">País</label>
      <select name="address[pais]" id="address_pais" class="block w-full px-3 py-3 border-2 border-gray-200 focus:border-teal-500 focus:ring-teal-500 rounded-lg focus:ring-2 transition-all duration-200 text-gray-900">
        <option value="">Seleccionar país</option>
        <% Address::PAISES.each do |k, v| %>
          <option value="<%= k %>"><%= v %></option>
        <% end %>
      </select>
      <% if @address.errors[:pais].any? %>
        <p class="mt-1 text-sm text-red-600"><%= @address.errors[:pais].join(", ") %></p>
      <% end %>
    </div>
    <div>
      <label for="address_email" class="block text-sm font-semibold text-gray-700 mb-2">Email</label>
      <input type="email" name="address[email]" id="address_email" class="block w-full px-3 py-3 border-2 border-gray-200 focus:border-teal-500 focus:ring-teal-500 rounded-lg focus:ring-2 transition-all duration-200 text-gray-900" placeholder="correo@ejemplo.com">
      <% if @address.errors[:email].any? %>
        <p class="mt-1 text-sm text-red-600"><%= @address.errors[:email].join(", ") %></p>
      <% end %>
    </div>
    <div class="flex justify-end gap-3">
      <button type="button" data-action="click->modal#close" class="px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors">Cancelar</button>
      <input type="submit" name="commit" value="Agregar Dirección" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">
    </div>
  </form>
<% end %>