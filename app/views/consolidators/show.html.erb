<% content_for :title, @consolidator.name %>

<div class="w-full max-w-4xl mx-auto">
  <div class="mb-6">
    <%= link_to consolidators_path, class: "inline-flex items-center text-blue-600 hover:text-blue-800" do %>
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" />
      </svg>
      Volver a consolidadores
    <% end %>
  </div>

  <div class="bg-white shadow-sm rounded-lg overflow-hidden">
    <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center">
      <h1 class="text-2xl font-bold text-gray-900"><%= @consolidator.name %></h1>
      <div class="flex space-x-2">
        <%= link_to edit_consolidator_path(@consolidator), class: "inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50" do %>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-2">
            <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10" />
          </svg>
          Editar
        <% end %>
      </div>
    </div>

    <div class="px-6 py-4">
      <% if @consolidator.fiscal_profile.present? %>
        <div class="mb-6">
          <h2 class="text-lg font-semibold text-gray-900 mb-4">Datos Fiscales</h2>
          <dl class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <dt class="text-sm font-medium text-gray-500">Razón Social</dt>
              <dd class="mt-1 text-sm text-gray-900"><%= @consolidator.fiscal_profile.razon_social %></dd>
            </div>
            <div>
              <dt class="text-sm font-medium text-gray-500">RFC</dt>
              <dd class="mt-1 text-sm text-gray-900"><%= @consolidator.fiscal_profile.rfc %></dd>
            </div>
            <div>
              <dt class="text-sm font-medium text-gray-500">Régimen</dt>
              <dd class="mt-1 text-sm text-gray-900"><%= @consolidator.fiscal_profile.regimen_nombre %></dd>
            </div>
            <% if @consolidator.fiscal_profile.uso_cfdi.present? %>
              <div>
                <dt class="text-sm font-medium text-gray-500">Uso CFDI</dt>
                <dd class="mt-1 text-sm text-gray-900"><%= @consolidator.fiscal_profile.uso_cfdi_nombre %></dd>
              </div>
            <% end %>
          </dl>
        </div>
      <% end %>

      <% if @consolidator.addresses.any? %>
        <div>
          <h2 class="text-lg font-semibold text-gray-900 mb-4">Direcciones</h2>
          <div class="space-y-4">
            <% @consolidator.addresses.each do |address| %>
              <div class="border border-gray-200 rounded-md p-4">
                <div class="flex items-center justify-between mb-2">
                  <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                    <%= address.tipo_nombre %>
                  </span>
                </div>
                <p class="text-sm text-gray-900"><%= address.domicilio_completo %></p>
                <p class="text-sm text-gray-500 mt-1"><%= address.email %></p>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
