<div class="bg-white p-6 rounded-lg shadow">
  <h3 class="text-lg font-medium text-gray-900 mb-4">Estado de la Asignaci√≥n</h3>

  <div class="flex items-center justify-between">
    <% statuses = [
      'activo',
      'bl_original',
      'documentos_ok',
      'despachado',
      'pendiente_endoso_agente_aduanal',
      'pendiente_endoso_consignatario',
      'listo',
      'revalidado',
      'finalizado'
    ] %>

    <% statuses.each_with_index do |status, index| %>
      <% is_completed = statuses.index(bl_house_line.status) >= index %>
      <% is_current = bl_house_line.status == status %>

      <div class="flex flex-col items-center">
        <div class="flex items-center">
          <% if index > 0 %>
            <div class="flex-1 h-0.5 <%= is_completed ? 'bg-green-500' : 'bg-gray-300' %>"></div>
          <% end %>

          <div class="relative">
            <div class="<%= is_completed ? 'bg-green-500' : is_current ? 'bg-blue-500' : 'bg-gray-300' %> w-8 h-8 rounded-full flex items-center justify-center">
              <% if is_completed %>
                <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                </svg>
              <% elsif is_current %>
                <div class="w-3 h-3 bg-white rounded-full"></div>
              <% else %>
                <div class="w-3 h-3 bg-gray-400 rounded-full"></div>
              <% end %>
            </div>
          </div>

          <% if index < statuses.length - 1 %>
            <div class="flex-1 h-0.5 <%= statuses.index(bl_house_line.status) > index ? 'bg-green-500' : 'bg-gray-300' %>"></div>
          <% end %>
        </div>

        <div class="mt-2 text-xs text-center">
          <div class="<%= is_current ? 'font-semibold text-blue-600' : is_completed ? 'text-green-600' : 'text-gray-500' %>">
            <%= bl_house_line_status_nombre(status) %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>